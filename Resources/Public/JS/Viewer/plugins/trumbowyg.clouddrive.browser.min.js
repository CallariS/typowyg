// @ts-nocheck
null==window.WaXCode&&(window.WaXCode={}),null==WaXCode&&(WaXCode={});class CORE_Deviant{static createPath=(e,r)=>{0!=r.length&&(null==e[r[0]]&&(e[r[0]]={}),CORE_Deviant.createPath(e[r[0]],r.slice(1)))};static createPathByString=(e,r,o=".")=>{CORE_Deviant.createPath(e,r.split(o))};static checkPath=(e,r)=>r.length<=1||null!=e[r[0]]&&CORE_Deviant.checkPath(e[r[0]],r.sclice(1));static checkPathByString=(e,r,o=".")=>CORE_Deviant.createPath(e,r.split(o));static generateRandomId({length:e=10,options:r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"}={}){let o="";for(let t=0;t<e;t++)o+=r.charAt(Math.floor(Math.random()*r.length));return o}}null==window.WaXCode.CORE&&(window.WaXCode.CORE=CORE=CORE_Deviant);class NET_Deviant{static syncGET=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(),r.responseText}}null==window.WaXCode.NET&&(window.WaXCode.NET=NET_Deviant),jQuery.trumbowyg.XC={},jQuery.trumbowyg.XC.CloudStorage={},jQuery.trumbowyg.XC.CloudStorage.Browser={},jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory=[],jQuery.trumbowyg.XC.CloudStorage.Browser.root=[];var showLoader=()=>{jQuery.trumbowyg.XC.CloudStorage.Browser.form.innerHTML=jQuery.trumbowyg.XC.CloudStorage.Browser.Loader};jQuery.trumbowyg.XC.CloudStorage.Browser.upload=(e,r,o,t,u,n,l)=>{var a=document.createElement("input"),g=0;a.setAttribute("type","file"),a.setAttribute("multiple",""),a.setAttribute("style","display : none ;"),jQuery.trumbowyg.XC.CloudStorage.Browser.form.appendChild(a),jQuery.trumbowyg.XC.CloudStorage.Browser.form.addEventListener("change",(e=>{g=e.target.files.length;for(let a of e.target.files)l(a).then((e=>{0==--g&&(jQuery.trumbowyg.XC.CloudStorage.Browser.form.innerHTML="",jQuery.trumbowyg.XC.CloudStorage.Browser.showDriveBrowser(jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot[jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.length-1],r,o,t,u,n,l))}),(e=>{alert(jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.uploadError.replaceAll("[%FILE%]",a.name).replaceAll("[%ERROR%]",e.result.error))})),showLoader()})),a.click()},jQuery.trumbowyg.XC.CloudStorage.Browser.renameDirectory=(e,r,o)=>{let t=document.createElement("input");t.value=e.querySelector("p").innerHTML,t.addEventListener("keydown",(e=>{"Enter"==e.key&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),t.addEventListener("keyup",(u=>{"Enter"==u.key&&(u.preventDefault(),u.stopPropagation(),u.stopImmediatePropagation(),o(r,t.value).then((r=>{e.setAttribute("onclick",e.getAttribute("onclick").replaceAll(e.querySelector("p").innerHTML,t.value)),e.innerHTML=e.innerHTML.replaceAll(e.querySelector("p").innerHTML,t.value),t.parentElement.insertBefore(e,t),t.remove()})).catch((e=>{alert(jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.unableToRetrieveFiles.replaceAll("[%ERROR%]",e.message))})))})),t.setAttribute("class","-XC_OS_GD --Renamer"),t.select(),e.parentElement.insertBefore(t,e),e.remove(),t.focus()},jQuery.trumbowyg.XC.CloudStorage.Browser.showDriveBrowser=async(e,r,o,t,u,n,l)=>{null==jQuery.trumbowyg.XC.CloudStorage.Browser.escHandler&&(jQuery.trumbowyg.XC.CloudStorage.Browser.escHandler=document.addEventListener("keyup",(e=>{"Escape"==e.key&&(jQuery.trumbowyg.XC.CloudStorage.Browser.opened=!1)}))),await r(e);let a=(0==jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory.length?"":`\n      <div class = '-XC_OS_GD --BackPanel'>\n          <button id = 'BackButton'><<</button>\n                  \n          <span>${jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory[jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory.length-1]}</span></div>`)+"\n      \n      <div class = '---WaXCode --T3 --CX_Editor --GoogleDrive --FileList'>";var g;for(let e of jQuery.trumbowyg.XC.CloudStorage.Browser.files)a+=`\n      <div id = 'Element'>\n          <button id      = 'label'\n                  class   = '---WaXCode --T3 --CX_Editor --GoogleDrive --FileList --${e.mimeType!==o?"file":"directory"}'\n                  style   = 'color : ${e.mimeType!==o?"blue":"green"} ;'\n                  \n                  ${e.mimeType!==o?"":'onclick = "jQuery.trumbowyg.XC.CloudStorage.Browser.form.innerHTML = ``; jQuery.trumbowyg.XC.CloudStorage.Browser.showDriveBrowser(`'+e.id+"`, updateFilelist,`"+o+"`, cmdRename, getShareableLink, cmdCreate, cmdUpload ); jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.push( `"+e.id+"`); jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory.push(`"+e.name+'`);"'}><p style = margin-left : 10% ;>${e.name}</p>${e.mimeType!==o?"":`\n                      <span>>></span></button>\n                      \n                      <div id = 'FolderActions'>\n                          <button id      = 'btnRename'\n                                  onclick = 'event.target.classList.add("--active"); jQuery.trumbowyg.XC.CloudStorage.Browser.renameDirectory( event.target.parentElement.parentElement.querySelector("#label"),"${e.id}",${t});'>\n                              <img src = '${jQuery.trumbowyg.XC.CloudStorage.Browser.icoRename}'/></button></div>`}</button>`+(e.mimeType!==o?`\n                  \n          <div id = 'Actions'>\n              <button id          = 'LinkFile'\n                      reference   = '${e.id}'\n                      onclick     = 'event.preventDefault(); if( confirm("`+jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.embedAccessWarning+`")) { getShareableLink("${e.id}"); showLoader();}'>\n                  <img src = '${jQuery.trumbowyg.XC.CloudStorage.Browser.icoLinkFile}'/></button>\n                          \n              <button id          = 'EmbedFile'\n                      style       = '${(g=e.mimeType===o)?" opacity : .5 ;":""}${g?"":" cursor : pointer ;"}'\n                      reference   = '${e.id}'`+(g?"":"onclick = 'if( confirm(\""+jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.embedAccessWarning+'")) { event.preventDefault(); getShareableLink("'+e.id+'",'+!0+"); showLoader();}'")+`>\n                  <img src = '${jQuery.trumbowyg.XC.CloudStorage.Browser.icoEmbedFile}'/></button></div>`:"")+"</div>";a+="</div>",null!=jQuery.trumbowyg.XC.CloudStorage.Browser.form&&jQuery.trumbowyg.XC.CloudStorage.Browser.opened||(window.WaXCode_CX_Editor_GoogleDrive_ModalOpened=!0,jQuery.trumbowyg.XC.CloudStorage.Browser.form=jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.openModal(jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.selectFileToEmbed)[0].querySelector("form"),jQuery.trumbowyg.XC.CloudStorage.Browser.opened=!0),jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.querySelector(".trumbowyg-modal-title").innerHTML=`\n    <span>${jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.selectFileToEmbed}\n      <button id      = 'Close'\n              onclick = 'jQuery.trumbowyg.XC.CloudStorage.Browser.opened = false ; jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.closeModal();'>X</button></span>\n        \n      <div id = 'Options'>\n        <button onclick = "cmdCreate('${jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.newFolderName}','${o}','${jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot[jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.length-1]}').then(( response ) => { alert('${jQuery.trumbowyg.XC.CloudStorage.Browser.refTrumbowyg.lang.folderAdded}'); jQuery.trumbowyg.XC.CloudStorage.Browser.showDriveBrowser('${jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot[jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.length-1]}', updateFilelist,'${o}', cmdRename, getShareableLink, cmdCreate, cmdUpload )});"><img src = '${jQuery.trumbowyg.XC.CloudStorage.Browser.icoCreateDirectory}'/></button>\n                        \n        <button onclick = "jQuery.trumbowyg.XC.CloudStorage.Browser.upload('${jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot[jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.length-1]}', updateFilelist,'${o}', cmdRename, getShareableLink, cmdCreate, cmdUpload );"><img src = '${jQuery.trumbowyg.XC.CloudStorage.Browser.icoUpload}'/></button></div>`,jQuery.trumbowyg.XC.CloudStorage.Browser.form.style.backgroundColor="#FFFFFF50",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.style.backgroundColor="#FFFFFF50",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.overflowY="auto",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.height="80vh",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.top="10vh",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.overflowX="none",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.borderRadius=".5em",jQuery.trumbowyg.XC.CloudStorage.Browser.form.parentElement.parentElement.style.boxShadow="0 0 1em black",jQuery.trumbowyg.XC.CloudStorage.Browser.form.innerHTML=a+"</div>",0!=jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory.length&&jQuery.trumbowyg.XC.CloudStorage.Browser.form.querySelector("#BackButton").addEventListener("click",(e=>{jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.pop(),jQuery.trumbowyg.XC.CloudStorage.Browser.currentDirectory.pop(),jQuery.trumbowyg.XC.CloudStorage.Browser.form.innerHTML="",jQuery.trumbowyg.XC.CloudStorage.Browser.showDriveBrowser(jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot[jQuery.trumbowyg.XC.CloudStorage.Browser.currentRoot.length-1],r,o,t,u,n,l)}))};